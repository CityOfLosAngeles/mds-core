#!/bin/bash

# Tag images built outside of the master branch with a
# "-prerelease" suffix for deployment safety.

IMAGE="$1"
BRANCH="$(git branch --no-color | grep '^\*' | sed 's/^\* //')"
echo $BRANCH

case $BRANCH in
  master)
    SUFFIX="";;
  develop)
    SUFFIX="-prerelease";;
  *)
    SUFFIX="-unstable";;
esac

docker build -t ${IMAGE}${SUFFIX} .
