suite: test secret metric sheets
templates:
  - secret.yaml
tests:
  - it: all
    release:
      namespace: mds
    set:
      secrets:
        pg-pass:
          name: pg-pass
          enabled: true
          data:
            postgresql-password: UGFzc3dvcmQxMjMj
    asserts:
      - hasDocuments:
          count: 1
      - isAPIVersion:
          of: v1
      - isKind:
          of: Secret
      - equal:
          path: metadata.name
          value: pg-pass
      - equal:
          path: metadata.namespace
          value: mds
      - equal:
          path: type
          value: Opaque
      - equal:
          path: data.postgresql-password
          value: UGFzc3dvcmQxMjMj
